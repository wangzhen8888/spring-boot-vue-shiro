webpackJsonp([6],{za5x:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("hRKE"),a=i.n(n),o={data:function(){return{totalCount:0,goodsList:[],dateTime:[],dateTime1:[],list:[],listLoading:!1,listQuery:{pageNum:1,pageRow:10,goods_id:"",goods_name:"",user_name:"",start_time:"",end_time:""},listGoodsQuery:{pageNum:1,pageRow:10,name:""},inventoryadmin:{goods_id:"",goods_name:"",add_num:"",reduce_num:"",goods_price:"",start_time:"",end_time:"",scrap_num:"",user_name:"",user_id:""},dialogStatus:"create",dialogFormVisible:!1,dialogGoodsVisible:!1,textMap:{update:"编辑",create:"创建文章"},temp:{id:"",content:"未选择"}}},created:function(){this.getList()},computed:{user:function(){return this.$store.state.user}},methods:{importExcel:function(){this.api({url:"/excel/getUser",method:"get",data:this.tempGoods,responseType:"blob"}).then(function(e){console.log(void 0===e?"undefined":a()(e));var t=document.createElement("a"),i=window.URL.createObjectURL(e);t.href=i,t.download="用户统计信息.xls",t.click(),window.URL.revokeObjectURL(i)})},onSearch:function(){console.log(this.listQuery),this.getList()},onReset:function(){this.dateTime1=[],this.selectTime(),this.$refs.searchForm.resetFields(),this.getList()},selectTime:function(){this.listQuery.start_time=this.dateTime1[0],this.listQuery.end_time=this.dateTime1[1],console.log(this.listQuery)},selectDateTime:function(){var e=this;this.inventoryadmin.start_time=this.dateTime[0],this.inventoryadmin.end_time=this.dateTime[1],console.log(this.inventoryadmin),this.hasPerm("order:list")&&(this.listLoading=!0,this.api({url:"/order/orderMsg",method:"get",params:this.inventoryadmin}).then(function(t){e.inventoryadmin.reduce_num=t.reduce_num,e.inventoryadmin.scrap_num=t.scrap_num,e.inventoryadmin.add_num=t.add_num,console.log(t),e.listLoading=!1}))},changeGoods:function(e){this.inventoryadmin.goods_id=e.id,this.inventoryadmin.goods_name=e.goods_name,this.inventoryadmin.goods_price=e.goods_price,this.dialogGoodsVisible=!1,console.log(this.inventoryadmin)},selectGoods:function(){this.dialogGoodsVisible=!0,this.getGoodsList()},getGoodsList:function(){var e=this;this.hasPerm("goods:list")&&(this.listLoading=!0,this.api({url:"/goods/listGoods",method:"get",params:this.listGoodsQuery}).then(function(t){console.log(t),e.listLoading=!1,e.goodsList=t.list,e.totalCount=t.totalCount}))},getList:function(){var e=this;this.hasPerm("inventoryAdmin:list")&&(this.listLoading=!0,this.api({url:"/inventoryAdmin/listInventoryAdmin",method:"get",params:this.listQuery}).then(function(t){console.log(t.list),e.listLoading=!1,e.list=t.list,e.totalCount=t.totalCount}))},handleSizeChange:function(e){this.listQuery.pageRow=e,this.handleFilter()},handleCurrentChange:function(e){this.listQuery.pageNum=e,this.getList()},getIndex:function(e){return(this.listQuery.pageNum-1)*this.listQuery.pageRow+e+1},showCreate:function(){this.inventoryadmin.goods_id="",this.inventoryadmin.goods_name="",this.inventoryadmin.add_num="",this.inventoryadmin.goods_price="",this.inventoryadmin.start_time="",this.inventoryadmin.end_time="",this.inventoryadmin.scrap_num="",this.inventoryadmin.user_name=this.user.nickname,this.inventoryadmin.user_id=this.user.userId,this.inventoryadmin.reduce_num="",this.dateTime=[],this.dialogStatus="create",this.dialogFormVisible=!0},showUpdate:function(e){this.temp.id=this.list[e].id,this.temp.content=this.list[e].content,this.dialogStatus="update",this.dialogFormVisible=!0},createInventoryadmin:function(){var e=this;this.api({url:"/inventoryAdmin/addInventoryAdmin",method:"post",data:this.inventoryadmin}).then(function(){e.getList(),e.dialogFormVisible=!1})},handleFilter:function(){this.listQuery.pageNum=1,this.getList()},updateArticle:function(){var e=this;this.api({url:"/article/updateArticle",method:"post",data:this.temp}).then(function(){e.getList(),e.dialogFormVisible=!1})}}},s={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"filter-container"},[i("el-form",{ref:"searchForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.listQuery}},[i("el-form-item",{attrs:{label:"操作人",prop:"user_name"}},[i("el-input",{attrs:{placeholder:"请输入操作人姓名"},model:{value:e.listQuery.user_name,callback:function(t){e.$set(e.listQuery,"user_name",t)},expression:"listQuery.user_name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"货物名称",prop:"goods_name"}},[i("el-input",{attrs:{placeholder:"请输入货物名称"},model:{value:e.listQuery.goods_name,callback:function(t){e.$set(e.listQuery,"goods_name",t)},expression:"listQuery.goods_name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"货物编码",prop:"goods_id"}},[i("el-input",{attrs:{placeholder:"请输入货物编码"},model:{value:e.listQuery.goods_id,callback:function(t){e.$set(e.listQuery,"goods_id",t)},expression:"listQuery.goods_id"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"盘点日期",prop:"dateTime"}},[i("div",{staticClass:"block"},[i("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy.MM.dd HH.mm.ss"},on:{change:e.selectTime},model:{value:e.dateTime1,callback:function(t){e.dateTime1=t},expression:"dateTime1"}})],1)]),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.onReset}},[e._v("重置")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.onSearch}},[e._v("查询")]),e._v(" "),e.hasPerm("inventoryAdmin:add")?i("el-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.showCreate}},[e._v("开始盘点\n          ")]):e._e()],1)],1)],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],attrs:{data:e.list,"element-loading-text":"拼命加载中",border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{align:"center",label:"序号",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{domProps:{textContent:e._s(e.getIndex(t.$index))}})]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"goods_name",prop:"goods_name",label:"货物名称",width:"80"}}),e._v(" "),i("el-table-column",{attrs:{align:"goods_name",prop:"goods_id",label:"货物编号",width:"80"}}),e._v(" "),i("el-table-column",{attrs:{align:"goods_name",prop:"goods_price",label:"商品单价",width:"80"}}),e._v(" "),i("el-table-column",{attrs:{align:"goods_name",prop:"user_name",label:"操作人",width:"80"}}),e._v(" "),i("el-table-column",{staticStyle:{width:"80px"},attrs:{align:"goods_name",prop:"reduce_num",label:"出库数量/收入"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-tag",{attrs:{type:"success"}},[e._v("数量："+e._s(t.row.reduce_num))]),i("el-tag",{attrs:{type:"success"}},[e._v("收入："+e._s(t.row.reduce_num*t.row.goods_price))])]}}])}),e._v(" "),i("el-table-column",{staticStyle:{width:"80px"},attrs:{align:"goods_name",prop:"add_num",label:"入库数量/支出"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-tag",{attrs:{type:"danger"}},[e._v("数量："+e._s(t.row.add_num))]),i("el-tag",{attrs:{type:"danger"}},[e._v("支出："+e._s(t.row.add_num*t.row.goods_price))])]}}])}),e._v(" "),i("el-table-column",{staticStyle:{width:"80px"},attrs:{align:"goods_name",prop:"scrap_num",label:"报废数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-tag",{attrs:{type:"warning"}},[e._v("数量："+e._s(t.row.scrap_num))]),i("el-tag",{attrs:{type:"warning"}},[e._v("支出："+e._s(t.row.scrap_num*t.row.goods_price))])]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"盘点开始日期",width:"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.start_time))])]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"盘点结束日期",width:"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.end_time))])]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"创建时间",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.createTime))])]}}])})],1),e._v(" "),i("el-pagination",{attrs:{"current-page":e.listQuery.pageNum,"page-size":e.listQuery.pageRow,total:e.totalCount,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),i("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{staticClass:"small-space",staticStyle:{width:"600px","margin-left":"50px"},attrs:{model:e.inventoryadmin,"label-position":"left","label-width":"80px"}},[i("el-form-item",{attrs:{label:"选择货物",prop:"goods_name"}},[""!=e.inventoryadmin.goods_name?i("el-tag",{attrs:{type:"info"}},[e._v(e._s(e.inventoryadmin.goods_name))]):e._e(),e._v(" "),i("el-button",{attrs:{type:"warning",size:"mini"},on:{click:e.selectGoods}},[e._v("选择货物")])],1),e._v(" "),i("el-form-item",{attrs:{label:"货物单价",prop:"goods_price"}},[""!=e.inventoryadmin.goods_price?i("el-tag",{attrs:{type:"success"}},[e._v(e._s(e.inventoryadmin.goods_price)+"元")]):e._e()],1),e._v(" "),i("el-form-item",{attrs:{label:"选择日期",prop:""}},[i("div",{staticClass:"block"},[i("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy.MM.dd HH.mm.ss"},on:{change:e.selectDateTime},model:{value:e.dateTime,callback:function(t){e.dateTime=t},expression:"dateTime"}})],1)]),e._v(" "),i("el-form-item",{attrs:{label:"出库数量"}},[i("el-input",{attrs:{type:"text",disabled:""},model:{value:e.inventoryadmin.reduce_num,callback:function(t){e.$set(e.inventoryadmin,"reduce_num",t)},expression:"inventoryadmin.reduce_num"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"收入资金"}},[""!=e.inventoryadmin.goods_price&&""!=e.inventoryadmin.reduce_num?i("el-tag",{attrs:{type:"success"}},[e._v(e._s(e.inventoryadmin.goods_price*e.inventoryadmin.reduce_num)+"元")]):e._e()],1),e._v(" "),i("el-form-item",{attrs:{label:"入库数量"}},[i("el-input",{attrs:{type:"text",disabled:""},model:{value:e.inventoryadmin.add_num,callback:function(t){e.$set(e.inventoryadmin,"add_num",t)},expression:"inventoryadmin.add_num"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"支出资金"}},[""!=e.inventoryadmin.goods_price&&""!=e.inventoryadmin.add_num?i("el-tag",{attrs:{type:"success"}},[e._v(e._s(e.inventoryadmin.goods_price*e.inventoryadmin.add_num)+"元")]):e._e()],1),e._v(" "),i("el-form-item",{attrs:{label:"报废数量"}},[i("el-input",{attrs:{type:"text",disabled:""},model:{value:e.inventoryadmin.scrap_num,callback:function(t){e.$set(e.inventoryadmin,"scrap_num",t)},expression:"inventoryadmin.scrap_num"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"报废资金"}},[""!=e.inventoryadmin.goods_price&&""!=e.inventoryadmin.scrap_num?i("el-tag",{attrs:{type:"success"}},[e._v(e._s(e.inventoryadmin.goods_price*e.inventoryadmin.scrap_num)+"元")]):e._e()],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),"create"==e.dialogStatus?i("el-button",{attrs:{type:"success"},on:{click:e.createInventoryadmin}},[e._v("创 建")]):i("el-button",{attrs:{type:"primary"},on:{click:e.updateArticle}},[e._v("修 改")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogGoodsVisible},on:{"update:visible":function(t){e.dialogGoodsVisible=t}}},[i("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],attrs:{data:e.goodsList,"element-loading-text":"拼命加载中",border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{align:"center",label:"序号",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{domProps:{textContent:e._s(e.getIndex(t.$index))}})]}}])}),e._v(" "),i("el-table-column",{staticStyle:{width:"60px"},attrs:{align:"center",prop:"goods_name",label:"货物名称"}}),e._v(" "),i("el-table-column",{staticStyle:{width:"60px"},attrs:{align:"center",prop:"goods_price",label:"货物价格"}}),e._v(" "),i("el-table-column",{staticStyle:{width:"60px"},attrs:{align:"center",prop:"goods_num",label:"库存数量"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"创建时间",width:"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.createTime))])]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"更新时间",width:"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.updateTime))])]}}])}),e._v(" "),e.hasPerm("goods:update")?i("el-table-column",{attrs:{align:"center",label:"管理",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini",type:"primary",icon:"edit"},on:{click:function(i){e.changeGoods(t.row)}}},[e._v("选择")])]}}])}):e._e()],1),e._v(" "),i("el-pagination",{attrs:{"current-page":e.listQuery.pageNum,"page-size":e.listQuery.pageRow,total:e.totalCount,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]},l=i("/Xao")(o,s,!1,null,null,null);t.default=l.exports}});