webpackJsonp([5],{Onsu:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=e("mvHQ"),a=e.n(s),o={data:function(){return{tes:"无社长",tesTitle:"",associationDetail:"",associationName:"",totalCount:0,list:[],listLoading:!1,listQuery:{pageNum:1,pageRow:10,name:""},search:"",dialogFormVisible:!1,dialogFormVisible1:!1,detailDialogVisible:!1,association:{id:"",name:"",details:"",simple_detail:"",create_time:"",delete_status:"",update_time:"",old_user_id:"",user_id:"",is_open:""},value9:"",textMap:{detail:"详情",update:"编辑",create:"创建社团"},dialogStatus:"create",userList:[]}},created:function(){this.getList()},methods:{handleRemove:function(t,i){console.log(t,i)},handlePreview:function(t){console.log(t)},handleEdit:function(t,i){console.log(i),this.association.old_user_id=this.association.user_id,this.association.user_id=i.userId,this.tesTitle="学号:"+i.userId+"-班级:"+i.class,this.tes=i.nickname,this.detailDialogVisible=!1},handleClose:function(t){this.$confirm("确认关闭？").then(function(i){t()}).catch(function(t){})},showAdminList:function(){this.getUserList(),this.detailDialogVisible=!0},changeAdmin:function(){this.association.user_id=this.value9},getList:function(){var t=this;this.hasPerm("association:list")&&(this.listLoading=!0,this.api({url:"/association/listAssociation",method:"get",params:this.listQuery}).then(function(i){console.log(i),t.listLoading=!1,t.list=i.list,t.totalCount=i.totalCount}))},showCreate:function(){this.association.name="",this.association.details="",this.association.simple_detail="",this.dialogStatus="create",this.dialogFormVisible=!0,this.tes="请选择社长",this.tesTitle="",console.log("执行了获取用户列表")},createAssociation:function(){var t=this;console.log(this.association),this.api({url:"/association/addAssociation",method:"post",data:this.association}).then(function(){t.getList(),t.dialogFormVisible=!1})},showUpdate:function(t){var i=this;console.log(t),this.association.id=t.id,console.log("我是id"+this.association.id),this.api({url:"/association/getAssociation",method:"post",data:this.association}).then(function(t){console.log(t),i.association.id=t.id,i.association.name=t.name,i.association.details=t.details,i.association.simple_detail=t.simple_detail,i.delete_status=t.delete_status,i.dialogStatus="update",i.dialogFormVisible=!0,i.association.user_id=t.user_id,i.tesTitle="学号:"+t.user_id+"-班级:"+t.class,i.tes=t.userName,console.log(i.association),i.checkedUser=t.user_id})},getUserList:function(){var t=this;this.api({url:"/user/assList",method:"get"}).then(function(i){console.log(i.list),t.userList=i.list,console.log(i),t.totalCount=i.totalCount})},updateAssociation:function(){var t=this;console.log(this.association),this.api({url:"/association/updateAssociation",method:"post",data:this.association}).then(function(i){t.$message({type:"info",message:i.msg}),t.getList(),t.dialogFormVisible=!1})},toRemoveAssociation:function(t){var i=this;console.log(t),this.api({url:"/association/updateAssociation",method:"post",data:t}).then(function(t){i.$message({type:"info",message:t.msg}),i.getList(),i.dialogFormVisible=!1})},handleSizeChange:function(t){this.listQuery.pageRow=t,this.handleFilter()},handleCurrentChange:function(t){this.listQuery.pageNum=t,this.getList()},handleFilter:function(){this.listQuery.pageNum=1,this.getList()},getIndex:function(t){return(this.listQuery.pageNum-1)*this.listQuery.pageRow+t+1},toUpdate:function(){var t=this;this.$confirm("请确认信息？","确认修改",{distinguishCancelAndClose:!0,confirmButtonText:"保存",cancelButtonText:"放弃修改"}).then(function(){t.updateAssociation()}).catch(function(i){t.getList(),t.dialogFormVisible=!1,t.dialogFormVisible1=!1})},removeAssociation:function(t){var i=this;this.$confirm("请确认信息？","确认删除",{distinguishCancelAndClose:!0,confirmButtonText:"删除",cancelButtonText:"取消"}).then(function(){i.list[t].delete_status=2;var e;e=JSON.parse(a()(i.list[t])),i.toRemoveAssociation(e)}).catch(function(t){i.getList()})},showDetail:function(t){this.association.id=this.list[t].id,this.association.name=this.list[t].name,this.association.details=this.list[t].details,this.association.simple_detail=this.list[t].simple_detail,this.association.create_time=this.list[t].create_time,this.association.update_time=this.list[t].update_time,this.dialogStatus="detail",this.dialogFormVisible=!0,this.dialogFormVisible1=!0}}},l={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"association"},[e("div",{staticClass:"filter-container"},[e("el-form",[e("el-form-item",[t.hasPerm("association:add")?e("el-button",{attrs:{type:"primary",icon:"plus"},on:{click:t.showCreate}},[t._v("新增社团")]):t._e()],1)],1)],1),t._v(" "),e("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:t.listLoading,expression:"listLoading",modifiers:{body:!0}}],attrs:{data:t.list,"element-loading-text":"拼命加载中",border:"",fit:"","highlight-current-row":""}},[e("template",{slot:"empty"},[t._v("\n        此时间段没有社团开放申请\n        "),e("img",{staticClass:"data-pic",attrs:{src:"#",alt:""}})]),t._v(" "),e("el-table-column",{attrs:{align:"center",label:"序号",width:"80"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{domProps:{textContent:t._s(t.getIndex(i.$index))}})]}}])}),t._v(" "),e("el-table-column",{staticStyle:{width:"30px"},attrs:{align:"center",prop:"name",label:"社团名称"}}),t._v(" "),e("el-table-column",{staticStyle:{width:"60px"},attrs:{align:"center",prop:"simple_detail",label:"社团简介"}}),t._v(" "),e("el-table-column",{attrs:{align:"center",label:"创建时间",width:"150"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(i.row.createTime))])]}}])}),t._v(" "),t.hasPerm("association:admin")?e("el-table-column",{attrs:{align:"center",label:"管理",width:"250"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-button",{attrs:{type:"primary",icon:"edit",size:"mini"},on:{click:function(e){t.showUpdate(i.row)}}},[t._v("社团管理")]),t._v(" "),t.hasPerm("association:delete")?e("el-button",{attrs:{type:"danger",icon:"delete",size:"mini"},on:{click:function(e){t.removeAssociation(i.$index)}}},[t._v("删除")]):t._e()]}}])}):t._e(),t._v(" "),e("img",{attrs:{src:"",alt:""}})],2),t._v(" "),e("el-pagination",{attrs:{"current-page":t.listQuery.pageNum,"page-size":t.listQuery.pageRow,total:t.totalCount,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t._v(" "),e("el-dialog",{attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible,"show-close":!1},on:{"update:visible":function(i){t.dialogFormVisible=i}}},[e("el-form",{staticClass:"small-space",staticStyle:{width:"400px","margin-left":"80px"},attrs:{model:t.association,"label-position":"left","label-width":"70px"}},[e("el-form-item",{attrs:{label:"社团名称"}},[e("el-input",{attrs:{type:"text",disabled:t.dialogFormVisible1},model:{value:t.association.name,callback:function(i){t.$set(t.association,"name",i)},expression:"association.name"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"社团简介"}},[e("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入内容",disabled:t.dialogFormVisible1},model:{value:t.association.simple_detail,callback:function(i){t.$set(t.association,"simple_detail",i)},expression:"association.simple_detail"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"社团详情"}},[e("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入内容",disabled:t.dialogFormVisible1},model:{value:t.association.details,callback:function(i){t.$set(t.association,"details",i)},expression:"association.details"}})],1),t._v(" "),e("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.dialogFormVisible1,expression:"dialogFormVisible1"}],attrs:{label:"创建时间"}},[e("el-input",{attrs:{type:"text",disabled:t.dialogFormVisible1},model:{value:t.association.create_time,callback:function(i){t.$set(t.association,"create_time",i)},expression:"association.create_time"}})],1),t._v(" "),e("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.dialogFormVisible1,expression:"dialogFormVisible1"}],attrs:{label:"更新时间"}},[e("el-input",{attrs:{type:"text",disabled:t.dialogFormVisible1},model:{value:t.association.update_time,callback:function(i){t.$set(t.association,"update_time",i)},expression:"association.update_time"}})],1),t._v(" "),e("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.dialogFormVisible1,expression:"dialogFormVisible1"}],attrs:{label:"社长"}},[e("el-input",{attrs:{type:"text",disabled:t.dialogFormVisible1},model:{value:t.value9,callback:function(i){t.value9=i},expression:"value9"}})],1),t._v(" "),e("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.dialogFormVisible1,expression:"!dialogFormVisible1"}],attrs:{label:"选择社长"}},[e("el-tooltip",{attrs:{placement:"top"}},[e("div",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(t.tesTitle))]),t._v(" "),e("el-button",[t._v(t._s(t.tes))])],1),t._v(" "),e("el-button",{staticStyle:{"margin-left":"22px"},attrs:{type:"warning"},on:{click:function(i){t.showAdminList()}}},[t._v("选择社长")])],1)],1),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(i){t.dialogFormVisible=!1,t.dialogFormVisible1=!1}}},[t._v("取 消")]),t._v(" "),"create"==t.dialogStatus?e("el-button",{attrs:{type:"success"},on:{click:t.createAssociation}},[t._v("创 建")]):"update"==t.dialogStatus?e("el-button",{attrs:{type:"primary"},on:{click:t.toUpdate}},[t._v("修 改")]):t._e()],1)],1),t._v(" "),e("el-dialog",{attrs:{title:"详情",visible:t.detailDialogVisible,width:"60%","before-close":t.handleClose},on:{"update:visible":function(i){t.detailDialogVisible=i}}},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.userList,border:"",fit:"","highlight-current-row":""}},[e("el-table-column",{attrs:{label:"学号",prop:"username"}}),t._v(" "),e("el-table-column",{attrs:{label:"姓名",prop:"nickname"}}),t._v(" "),e("el-table-column",{attrs:{label:"班级",prop:"class"}}),t._v(" "),e("el-table-column",{attrs:{align:"right"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-button",{attrs:{size:"mini"},on:{click:function(e){t.handleEdit(i.$index,i.row)}}},[t._v("选择为社长")])]}}])})],1),t._v(" "),e("el-pagination",{attrs:{"current-page":t.listQuery.pageNum,"page-size":t.listQuery.pageRow,total:t.totalCount,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]},n=e("VU/8")(o,l,!1,null,null,null);i.default=n.exports},mvHQ:function(t,i,e){t.exports={default:e("qkKv"),__esModule:!0}},qkKv:function(t,i,e){var s=e("FeBl"),a=s.JSON||(s.JSON={stringify:JSON.stringify});t.exports=function(t){return a.stringify.apply(a,arguments)}}});