webpackJsonp([7],{FUHG:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=o("hRKE"),i=o.n(s),a={data:function(){return{totalCount:0,disFlag:!0,list:[],listLoading:!1,flag:"",listQuery:{pageNum:1,pageRow:10,name:""},dialogStatus:"create",dialogFormVisible:!1,dialogGoodsVisible:!1,textMap:{update:"编辑",create:"创建货物"},tempGoods:{id:"",goods_name:"",goods_num:"",goods_price:"",goods_type:"",create_time:"",update_time:"",delete_status:""},goodsOrder:{user_id:"",user_name:"",goods_id:"",goods_name:"",goods_price:"",goods_totalNum:"",goods_num:"",company_name:"",company_phone:"",order_type:"",marks:""},options:[{value:"0",label:"入库"},{value:"1",label:"出库"},{value:"2",label:"报废"},{value:"3",label:"缺货"}],orderType:"",rules:{goods_num:[{validator:function(e,t,o){""!=t&&0==/^[+]{0,1}(\d+)$|^[+]{0,1}(\d+\.\d+)$/.test(t)?o(new Error("请填写大于0的数字")):o()},trigger:"change"}]}}},created:function(){this.getList()},computed:{user:function(){return this.$store.state.user}},methods:{selectOrderType:function(){0==this.orderType?this.flag=!1:this.flag=!0,this.goodsOrder.order_type=this.orderType,console.log(this.goodsOrder.order_type)},getList:function(){var e=this;this.hasPerm("goods:list")&&(this.listLoading=!0,this.api({url:"/goods/listGoods",method:"get",params:this.listQuery}).then(function(t){console.log(t),e.listLoading=!1,e.list=t.list,e.totalCount=t.totalCount}))},handleColse:function(){this.dialogFormVisible=!1,this.$refs.goodsForm.resetFields()},handleColse1:function(){this.dialogGoodsVisible=!1,this.orderType="",this.$refs.goodsAdmin.resetFields()},handleSizeChange:function(e){this.listQuery.pageRow=e,this.handleFilter()},handleCurrentChange:function(e){this.listQuery.pageNum=e,this.getList()},getIndex:function(e){return(this.listQuery.pageNum-1)*this.listQuery.pageRow+e+1},showCreate:function(){this.tempGoods.id="",this.tempGoods.goods_name="",this.tempGoods.goods_num="",this.tempGoods.goods_price="",this.dialogStatus="create",this.dialogFormVisible=!0},importExcel:function(){this.api({url:"/excel/getUser",method:"get",data:this.tempGoods,responseType:"blob"}).then(function(e){console.log(void 0===e?"undefined":i()(e));var t=document.createElement("a"),o=window.URL.createObjectURL(e);t.href=o,t.download="用户统计信息.xls",t.click(),window.URL.revokeObjectURL(o)})},deleteGoods:function(e){var t=this;this.tempGoods.id=e.id,this.$confirm("此操作删除该货物, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.api({url:"/goods/deleteGoods",method:"post",data:t.tempGoods}).then(function(){t.getList(),t.$message({type:"success",message:"删除成功!"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},showUpdate:function(e){this.tempGoods.id=this.list[e].id,this.tempGoods.goods_name=this.list[e].goods_name,this.tempGoods.goods_num=this.list[e].goods_num,this.tempGoods.goods_price=this.list[e].goods_price,this.dialogStatus="update",this.dialogFormVisible=!0},createGoods:function(){var e=this;this.api({url:"/goods/addGoods",method:"post",data:this.tempGoods}).then(function(){e.getList(),e.dialogFormVisible=!1})},createOrder:function(){var e=this;this.api({url:"/order/addOrder",method:"post",data:this.goodsOrder}).then(function(t){e.$message({type:"success",message:t.msg}),e.getList(),e.dialogGoodsVisible=!1,e.orderType="",e.$refs.goodsAdmin.resetFields()})},handleFilter:function(){this.listQuery.pageNum=1,this.getList()},updateGoods:function(){var e=this;this.api({url:"/goods/updateGoods",method:"post",data:this.tempGoods}).then(function(){e.getList(),e.dialogFormVisible=!1})},adminGoods:function(e){this.goodsOrder.user_name=this.user.nickname,this.goodsOrder.user_id=this.user.userId,this.goodsOrder.goods_name=e.goods_name,this.goodsOrder.goods_price=e.goods_price,this.goodsOrder.goods_totalNum=e.goods_num,this.goodsOrder.goods_id=e.id,this.dialogGoodsVisible=!0}}},l={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"app-container"},[o("div",{staticClass:"filter-container"},[o("el-form",[o("el-form-item",[e.hasPerm("goods:add")?o("el-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.showCreate}},[e._v("添加\n          ")]):e._e()],1)],1)],1),e._v(" "),o("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],attrs:{data:e.list,"element-loading-text":"拼命加载中",border:"",fit:"","highlight-current-row":""}},[o("el-table-column",{attrs:{align:"center",label:"序号",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",{domProps:{textContent:e._s(e.getIndex(t.$index))}})]}}])}),e._v(" "),o("el-table-column",{staticStyle:{width:"60px"},attrs:{align:"center",prop:"goods_name",label:"货物名称"}}),e._v(" "),o("el-table-column",{staticStyle:{width:"60px"},attrs:{align:"center",prop:"goods_price",label:"货物价格"}}),e._v(" "),o("el-table-column",{staticStyle:{width:"60px"},attrs:{align:"center",prop:"goods_num",label:"库存数量"}}),e._v(" "),o("el-table-column",{attrs:{align:"center",label:"创建时间",width:"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.createTime))])]}}])}),e._v(" "),o("el-table-column",{attrs:{align:"center",label:"更新时间",width:"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.updateTime))])]}}])}),e._v(" "),e.hasPerm("goods:update")?o("el-table-column",{attrs:{align:"center",label:"管理",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini",type:"primary",icon:"edit"},on:{click:function(o){e.showUpdate(t.$index)}}},[e._v("修改")]),e._v(" "),o("el-button",{attrs:{size:"mini",type:"primary",icon:"edit"},on:{click:function(o){e.deleteGoods(t.row)}}},[e._v("删除")]),e._v(" "),o("el-button",{attrs:{size:"mini",type:"primary",icon:"edit"},on:{click:function(o){e.adminGoods(t.row)}}},[e._v("出入库")])]}}])}):e._e()],1),e._v(" "),o("el-pagination",{attrs:{"current-page":e.listQuery.pageNum,"page-size":e.listQuery.pageRow,total:e.totalCount,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),o("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[o("el-form",{ref:"goodsForm",staticClass:"small-space",staticStyle:{width:"300px","margin-left":"50px"},attrs:{model:e.tempGoods,"label-position":"left",rules:e.rules,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"货物名称",prop:"goods_name"}},[o("el-input",{attrs:{type:"text"},model:{value:e.tempGoods.goods_name,callback:function(t){e.$set(e.tempGoods,"goods_name",t)},expression:"tempGoods.goods_name"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"货物数量",prop:"goods_num"}},[o("el-input",{attrs:{type:"text"},model:{value:e.tempGoods.goods_num,callback:function(t){e.$set(e.tempGoods,"goods_num",t)},expression:"tempGoods.goods_num"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"货物价格",prop:"goods_price"}},[o("el-input",{attrs:{type:"text"},model:{value:e.tempGoods.goods_price,callback:function(t){e.$set(e.tempGoods,"goods_price",t)},expression:"tempGoods.goods_price"}})],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.handleColse}},[e._v("取 消")]),e._v(" "),"create"==e.dialogStatus?o("el-button",{attrs:{type:"success"},on:{click:e.createGoods}},[e._v("创 建")]):o("el-button",{attrs:{type:"primary"},on:{click:e.updateGoods}},[e._v("修 改")])],1)],1),e._v(" "),o("el-dialog",{attrs:{title:"商品出入库管理",visible:e.dialogGoodsVisible},on:{"update:visible":function(t){e.dialogGoodsVisible=t}}},[o("el-form",{ref:"goodsAdmin",staticClass:"small-space",staticStyle:{width:"600px","margin-left":"50px"},attrs:{model:e.goodsOrder,"label-position":"left","label-width":"120px"}},[o("el-form-item",{attrs:{label:"货物名称",prop:"goods_name"}},[o("el-input",{attrs:{type:"text",disabled:e.disFlag},model:{value:e.goodsOrder.goods_name,callback:function(t){e.$set(e.goodsOrder,"goods_name",t)},expression:"goodsOrder.goods_name"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"货物总数量",prop:"goods_totalNum"}},[o("el-input",{attrs:{type:"text",disabled:e.disFlag},model:{value:e.goodsOrder.goods_totalNum,callback:function(t){e.$set(e.goodsOrder,"goods_totalNum",t)},expression:"goodsOrder.goods_totalNum"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"货物价格",prop:"goods_price"}},[o("el-input",{attrs:{type:"text",disabled:e.disFlag},model:{value:e.goodsOrder.goods_price,callback:function(t){e.$set(e.goodsOrder,"goods_price",t)},expression:"goodsOrder.goods_price"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"订单类型",prop:"order_type"}},[[o("el-select",{attrs:{placeholder:"请选择"},on:{change:e.selectOrderType},model:{value:e.orderType,callback:function(t){e.orderType=t},expression:"orderType"}},e._l(e.options,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))]],2),e._v(" "),o("el-form-item",{attrs:{label:"货物数量",prop:"goods_num"}},[o("el-input",{attrs:{type:"text"},model:{value:e.goodsOrder.goods_num,callback:function(t){e.$set(e.goodsOrder,"goods_num",t)},expression:"goodsOrder.goods_num"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"公司名称",prop:"company_name"}},[o("el-input",{attrs:{type:"text"},model:{value:e.goodsOrder.company_name,callback:function(t){e.$set(e.goodsOrder,"company_name",t)},expression:"goodsOrder.company_name"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"公司电话",prop:"company_phone"}},[o("el-input",{attrs:{type:"text"},model:{value:e.goodsOrder.company_phone,callback:function(t){e.$set(e.goodsOrder,"company_phone",t)},expression:"goodsOrder.company_phone"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"备注",prop:"marks"}},[o("el-input",{attrs:{type:"textarea"},model:{value:e.goodsOrder.marks,callback:function(t){e.$set(e.goodsOrder,"marks",t)},expression:"goodsOrder.marks"}})],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.handleColse1}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"success"},on:{click:e.createOrder}},[e._v("创 建")])],1)],1)],1)},staticRenderFns:[]},r=o("/Xao")(a,l,!1,null,null,null);t.default=r.exports}});