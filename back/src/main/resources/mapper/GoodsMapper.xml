<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.heeexy.example.dao.GoodsDao">
<!--新增货物-->
    <insert id="addGoods" parameterType="com.alibaba.fastjson.JSONObject">
        INSERT INTO goods
        (goods_name,goods_num,goods_price) VALUES
            ( #{goods_name},#{goods_num},#{goods_price})
    </insert>
    <!--查询所有货物数量-->
    <select id="countGoods" resultType="Integer">
        SELECT count(0)
        FROM goods w
        WHERE w.delete_status = 1
    </select>
    <!--查询货物列表-->
    <select id="listGoods" resultType="com.alibaba.fastjson.JSONObject">
        SELECT
        w.id id,
        w.goods_name,
        w.goods_num,
        w.goods_price,
        w.goods_type,
        date_format(w.create_time, '%Y.%m.%d %T') createTime,
        date_format(w.update_time, '%Y.%m.%d %T') updateTime
        FROM goods w
        WHERE w.delete_status = '1'
              ORDER BY w.id DESC
        LIMIT #{offSet}, #{pageRow}
    </select>
    <!--动态更新货物信息-->
    <update id="updateGoods" parameterType="com.alibaba.fastjson.JSONObject">
        UPDATE goods
        <set>

            <if test="goods_name != null and goods_name!=''">goods_name=#{goods_name},</if>
            <if test="goods_num != null and goods_num!=''">goods_num=#{goods_num},</if>
            <if test="goods_price != null and goods_price!=''">goods_price=#{goods_price},</if>
            <if test="goods_type != null and goods_type!=''">goods_type=#{goods_type},</if>


        </set>

        WHERE id = #{id}
    </update>
    <!--删除货物信息-->
    <update id="deleteGoods" parameterType="com.alibaba.fastjson.JSONObject">
        UPDATE goods
        SET delete_status=2
        WHERE id=#{id}


    </update>
    <!--根据id获取货物详情-->
    <select id="getById" parameterType="com.alibaba.fastjson.JSONObject" resultType="com.alibaba.fastjson.JSONObject">

        SELECT  g.id,g.goods_name,g.goods_price ,g.goods_num FROM goods g WHERE id=#{id}
</select>

</mapper>